{
  "package.json": {
    "name": "todo-api",
    "version": "1.0.0",
    "description": "API for managing To-Do items, supporting creation, retrieval, update, and deletion of tasks.",
    "main": "backend/app.js",
    "scripts": {
      "start": "node backend/app.js",
      "dev": "nodemon backend/app.js"
    },
    "keywords": [],
    "author": "",
    "license": "ISC",
    "dependencies": {
      "express": "^4.18.2",
      "joi": "^17.11.0",
      "uuid": "^9.0.1",
      "cors": "^2.8.5"
    },
    "devDependencies": {
      "nodemon": "^3.0.2"
    }
  },
  "backend/schemas.js": "const Joi = require('joi');\n\n// Base Joi schema for UUID validation\nconst uuidSchema = Joi.string().guid({ version: ['uuidv4'] });\n\n// Schema for a full Todo item (server-side representation)\nconst TodoSchema = Joi.object({\n  id: uuidSchema.required().description('Unique identifier for the To-Do item'),\n  title: Joi.string().min(1).max(255).required().description('Title of the To-Do item'),\n  description: Joi.string().allow(null).optional().description('Optional detailed description of the To-Do item'),\n  completed: Joi.boolean().default(false).required().description('Status indicating if the To-Do item is completed'),\n  createdAt: Joi.date().iso().required().description('Timestamp when the To-Do item was created'),\n  updatedAt: Joi.date().iso().required().description('Timestamp when the To-Do item was last updated'),\n});\n\n// Schema for creating a new Todo item\nconst TodoCreateSchema = Joi.object({\n  title: Joi.string().min(1).max(255).required().description('Title of the To-Do item'),\n  description: Joi.string().allow(null).optional().description('Optional detailed description of the To-Do item'),\n});\n\n// Schema for partially updating a Todo item (PATCH)\nconst TodoUpdateSchema = Joi.object({\n  title: Joi.string().min(1).max(255).optional().description('New title for the To-Do item'),\n  description: Joi.string().allow(null).optional().description('New description for the To-Do item'),\n  completed: Joi.boolean().optional().description('New completion status for the To-Do item'),\n}).min(1).description('Fields to update for a To-Do item. At least one field must be provided for a PATCH operation.');\n\n// Schema for fully updating a Todo item (PUT)\n// This combines TodoCreateSchema with the required 'completed' field\nconst TodoPutSchema = Joi.object({\n  title: Joi.string().min(1).max(255).required().description('Title of the To-Do item'),\n  description: Joi.string().allow(null).optional().description('Optional detailed description of the To-Do item'),\n  completed: Joi.boolean().required().description('Completion status of the To-Do item'),\n});\n\n// Schema for error responses\nconst ErrorSchema = Joi.object({\n  code: Joi.string().required().description('A unique error code, e.g., \\'INVALID_INPUT\\', \\'NOT_FOUND\\''),\n  message: Joi.string().required().description('A human-readable error message'),\n});\n\nmodule.exports = {\n  uuidSchema,\n  TodoSchema,\n  TodoCreateSchema,\n  TodoUpdateSchema,\n  TodoPutSchema,\n  ErrorSchema,\n};\n",
  "backend/app.js": "const express = require('express');\nconst cors = require('cors');\nconst { v4: uuidv4 } = require('uuid');\nconst { TodoCreateSchema, TodoUpdateSchema, TodoPutSchema, uuidSchema } = require('./schemas');\n\nconst app = express();\nconst PORT = process.env.PORT || 3000;\nconst API_BASE_PATH = '/api/v1';\n\n// Middleware\napp.use(cors());\napp.use(express.json());\n\n// In-memory data store (replace with a database in a real application)\nlet todos = [];\n\n// Helper function for error responses\nconst sendError = (res, statusCode, code, message) => {\n  res.status(statusCode).json({ code, message });\n};\n\n// --- Controllers/Route Handlers ---\n\n/**\n * @route GET /todos\n * @summary Retrieve a list of all To-Do items\n */\napp.get(`${API_BASE_PATH}/todos`, (req, res) => {\n  res.status(200).json(todos);\n});\n\n/**\n * @route POST /todos\n * @summary Create a new To-Do item\n */\napp.post(`${API_BASE_PATH}/todos`, (req, res) => {\n  const { error, value } = TodoCreateSchema.validate(req.body);\n\n  if (error) {\n    return sendError(res, 400, 'INVALID_INPUT', error.details[0].message);\n  }\n\n  const now = new Date().toISOString();\n  const newTodo = {\n    id: uuidv4(),\n    title: value.title,\n    description: value.description || null,\n    completed: false,\n    createdAt: now,\n    updatedAt: now,\n  };\n\n  todos.push(newTodo);\n  res.status(201).json(newTodo);\n});\n\n/**\n * @route GET /todos/{id}\n * @summary Retrieve a single To-Do item by ID\n */\napp.get(`${API_BASE_PATH}/todos/:id`, (req, res) => {\n  const { id } = req.params;\n  const { error } = uuidSchema.validate(id);\n\n  if (error) {\n    return sendError(res, 400, 'INVALID_INPUT', 'Invalid UUID format for ID.');\n  }\n\n  const todo = todos.find(t => t.id === id);\n\n  if (!todo) {\n    return sendError(res, 404, 'NOT_FOUND', `To-Do item with ID ${id} not found.`);\n  }\n\n  res.status(200).json(todo);\n});\n\n/**\n * @route PUT /todos/{id}\n * @summary Update an existing To-Do item by ID (full replacement)\n */\napp.put(`${API_BASE_PATH}/todos/:id`, (req, res) => {\n  const { id } = req.params;\n  const { error: idError } = uuidSchema.validate(id);\n\n  if (idError) {\n    return sendError(res, 400, 'INVALID_INPUT', 'Invalid UUID format for ID.');\n  }\n\n  const { error: bodyError, value } = TodoPutSchema.validate(req.body);\n\n  if (bodyError) {\n    return sendError(res, 400, 'INVALID_INPUT', bodyError.details[0].message);\n  }\n\n  const todoIndex = todos.findIndex(t => t.id === id);\n\n  if (todoIndex === -1) {\n    return sendError(res, 404, 'NOT_FOUND', `To-Do item with ID ${id} not found.`);\n  }\n\n  const updatedTodo = {\n    ...todos[todoIndex],\n    title: value.title,\n    description: value.description || null,\n    completed: value.completed,\n    updatedAt: new Date().toISOString(),\n  };\n\n  todos[todoIndex] = updatedTodo;\n  res.status(200).json(updatedTodo);\n});\n\n/**\n * @route PATCH /todos/{id}\n * @summary Partially update an existing To-Do item by ID\n */\napp.patch(`${API_BASE_PATH}/todos/:id`, (req, res) => {\n  const { id } = req.params;\n  const { error: idError } = uuidSchema.validate(id);\n\n  if (idError) {\n    return sendError(res, 400, 'INVALID_INPUT', 'Invalid UUID format for ID.');\n  }\n\n  const { error: bodyError, value } = TodoUpdateSchema.validate(req.body);\n\n  if (bodyError) {\n    return sendError(res, 400, 'INVALID_INPUT', bodyError.details[0].message);\n  }\n\n  const todoIndex = todos.findIndex(t => t.id === id);\n\n  if (todoIndex === -1) {\n    return sendError(res, 404, 'NOT_FOUND', `To-Do item with ID ${id} not found.`);\n  }\n\n  const existingTodo = todos[todoIndex];\n  const updatedTodo = {\n    ...existingTodo,\n    ...value,\n    updatedAt: new Date().toISOString(),\n  };\n\n  todos[todoIndex] = updatedTodo;\n  res.status(200).json(updatedTodo);\n});\n\n/**\n * @route DELETE /todos/{id}\n * @summary Delete a To-Do item by ID\n */\napp.delete(`${API_BASE_PATH}/todos/:id`, (req, res) => {\n  const { id } = req.params;\n  const { error } = uuidSchema.validate(id);\n\n  if (error) {\n    return sendError(res, 400, 'INVALID_INPUT', 'Invalid UUID format for ID.');\n  }\n\n  const initialLength = todos.length;\n  todos = todos.filter(t => t.id !== id);\n\n  if (todos.length === initialLength) {\n    return sendError(res, 404, 'NOT_FOUND', `To-Do item with ID ${id} not found.`);\n  }\n\n  res.status(204).send(); // No Content\n});\n\n// Global error handler for unexpected errors\napp.use((err, req, res, next) => {\n  console.error(err.stack);\n  sendError(res, 500, 'INTERNAL_SERVER_ERROR', 'Something went wrong!');\n});\n\n// Start the server\napp.listen(PORT, () => {\n  console.log(`Server running on http://localhost:${PORT}`);\n  console.log(`API available at http://localhost:${PORT}${API_BASE_PATH}`);\n});\n"
}